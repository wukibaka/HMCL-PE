name: Android CI

on: 
  workflow_dispatch: 
  pull_request: 
    branches: [ main ]

jobs: 
  build: 
    runs-on: ubuntu-latest

    steps: 
    - name: ç¼–è¯‘å¼€å§‹é€šçŸ¥
      run: |
       curlÂ -kÂ --dataÂ chat_id="${{Â secrets.TELEGRAM_CHAT_IDÂ }}"Â --dataÂ "text=ğŸ‰Â ä¸»äººï¼Œæ‚¨æ­£åœ¨ç¼–è¯‘HMCL-PE,è¯·è€å¿ƒç­‰å¾…......Â ğŸ˜‹"Â "https://api.telegram.org/bot${{Â secrets.TELEGRAM_BOT_TOKENÂ }}/sendMessage"

    - name: æ£€æŸ¥
      uses: actions/checkout@v3

    - name: å®‰è£… JDK 11
      uses: actions/setup-java@v3
      with: 
        java-version: '11'
        distribution: 'temurin'
        cache: gradle

    - name: ç»™äºˆgradlewæ‰§è¡Œè®¸å¯
      run: |
        sudo chmod +x gradlew

    - name: ç¼–è¯‘
      run: |
        cd HMCLPE&&sudo ./gradlew build
    
    - name: ä¸Šä¼ 
      uses: actions/upload-artifact@v3
      with: 
        path: HMCLPE/build/outputs/apk/release/HMCLPE-release-unsigned.apk